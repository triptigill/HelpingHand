@using Microsoft.AspNet.Identity
@if (Request.IsAuthenticated)
{
    using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm", @class = "navbar-right" }))
    {
        @Html.AntiForgeryToken()

        <div class="user-menu-button dropdown">

            <div class="dropdown-toggle ripple row align-items-center no-gutters px-2 px-sm-4" role="button" id="dropdownUserMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <div class="avatar-wrapper">
                    <img class="avatar" src="~/Content/assets/images/avatars/profile.jpg">
                    <i class="status text-green icon-checkbox-marked-circle s-4"></i>
                </div>
                <span class="username mx-3 d-none d-md-block">@User.Identity.GetUserName()</span>
            </div>

            <div class="dropdown-menu" aria-labelledby="dropdownUserMenu">

                <a class="dropdown-item" href="/Manage/Index">
                    <div class="row no-gutters align-items-center flex-nowrap">
                        <i class="icon-account"></i>
                        <span class="px-3">My Profile</span>
                    </div>
                </a>
                <a class="dropdown-item" href="javascript:document.getElementById('logoutForm').submit()">
                    <div class="row no-gutters align-items-center flex-nowrap">
                        <i class="icon-exit-to-app"></i>
                        <span class="px-3">Logout</span>
                    </div>
                </a>

            </div>
        </div>
    }
}
else
{
    <div class="user-menu-button dropdown">

        <div class="dropdown-toggle ripple row align-items-center no-gutters px-2 px-sm-4" role="button" id="dropdownUserMenu" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <div class="avatar-wrapper">
                <img class="avatar" src="~/Content/assets/images/avatars/profile.jpg">
                <i class="status text-red icon-close-circle s-4"></i>
            </div>
            <span class="username mx-3 d-none d-md-block">Welcome Guest</span>
        </div>

        <div class="dropdown-menu" aria-labelledby="dropdownUserMenu">

            <a class="dropdown-item" href="/Account/Register" id="registerLink">
                <div class="row no-gutters align-items-center flex-nowrap">
                    <i class="icon-account"></i>
                    <span class="px-3">Register</span>
                </div>
            </a>
            <a class="dropdown-item" href="/Account/Login" id="loginLink">
                <div class="row no-gutters align-items-center flex-nowrap">
                    <i class="icon-exit-to-app"></i>
                    <span class="px-3">Login</span>
                </div>
            </a>

        </div>
    </div>
}

